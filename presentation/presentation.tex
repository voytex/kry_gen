% ----------------------------------------------------------------------
% Authors:     Tomas Fryza, Wykys
%              Dept. of Radio Electronics, Brno Univ. of Technology
% Created:     2018-05-22
% Last update: 2019-07-24
% Description: Template using official colors of Brno University of 
% Technology defined by graphical manual in 2015.
% ----------------------------------------------------------------------
% License:     CC BY-NC-SA 4.0
% Keep the name of the authors. You may not use the template for 
% commercial purposes. Share and modify as you like under the same 
% license as the original. 
%
% https://creativecommons.org/licenses/by-nc-sa/4.0/
% ----------------------------------------------------------------------

% ----------------------------------------------------------------------
% PACKAGES
% ----------------------------------------------------------------------

%% Sets aspect ratio to 16:10, and frame size to 160mm by 100mm
% Please, do not use old-school 4:3 ratio anymore:)
\documentclass[aspectratio=1610]{beamer}

%% Select your favorite language
\usepackage[czech]{babel} % Multilingual support for LaTeX
% \usepackage[czech]{babel}

\usepackage[utf8]{inputenc} % Accept different input encodings
\usepackage{ucs} % Extended UTF-8 input encoding support for LaTeX
\usepackage{graphicx} % Enhanced support for graphics
\usepackage{listings} % Typeset source code listings using LaTeX
\usepackage{color} % Colour control for LaTeX documents
\usepackage{tikz}
\usepackage{url}
%% Copy your favorite logo from "vut_logo_archive/" to root folder 
% and rename file to "logo.png"

%% Select color theme
%\usepackage{themevut} % All in red:)
% \usepackage[FA]{themevut}
% \usepackage[FAST]{themevut}
% \usepackage[FaVU]{themevut}
% \usepackage[FCH]{themevut}
\usepackage[FEKT]{themevut}
% \usepackage[FIT]{themevut}
% \usepackage[FP]{themevut}
% \usepackage[FSI]{themevut}
% \usepackage[CESA]{themevut}
% \usepackage[USI]{themevut}

% ----------------------------------------------------------------------
% TITLE PAGE
% ----------------------------------------------------------------------

% The short title appears at the bottom of every slide, the full title
% is only on the title page.
\title[Generátor úloh do aplikované kryptografie]
{Generátor úloh do aplikované kryptografie}

% Type of project, i.e. Bachelor, Master, PhD, etc.
% \subtitle
% {Type of project}

% Your name
\author[ Homola, Chrenčík, Marák, Lukáš]
{Michal Homola, Dominik Chrenčík, Jiří Marák, Vojtěch Lukáš}

% Your institution
\institute
{MPC-KRY \\
Ústav telekomunikací  \\
VUT v Brně
}

% Date, can be changed to a custom date
\date{\today}

% Logo on title page
\titlegraphic{\includegraphics[height=.15\textheight]{logo.png}}

\begin{document}

% ----------------------------------------------------------------------
% PRESENTATION SLIDES
% ----------------------------------------------------------------------

\begin{frame}
    % Print the title page as the first slide
    \titlepage
\end{frame}

% ----------------------------------------------------------------------

\begin{frame}{Zadání}
    \begin{alertblock}{}
        Navrhněte a implementujte vlastní službu pro generování úloh do aplikované kryptografie. Služba bude mít vlastní rozhraní \textbf{(REST API)}, prostřednictvím kterého bude možné vyžádat úlohu \textbf{(HTTP metoda GET)}. Úloha se bude předávat ve formátu \textbf{JSON}. Úlohy se budou generovat \textbf{do konzole}. 
    \end{alertblock}
\end{frame}
% ----------------------------------------------------------------------

\begin{frame}{Architektura}
    \begin{figure}
        \centering
        \input{../control_study/schemes/database-glyph.tex}
        \input{../control_study/schemes/system-scheme}
        \caption{Schéma vyvinutého systému}
    \end{figure}
\end{frame}

% -----------------------------------------------------------------------

\begin{frame}{SQL databáze úloh}
    \begin{itemize}
        \item databáze je navržena pro maximalizaci variability
        \item prototypy úloh, do kterých jsou na serveru dosazeny náhodné hodnoty
        \item token \textbf{$\$n$}
        \item pole \textbf{result} je prázdné, výsledek je dosazen až po generaci hodnot
    \end{itemize}
    \begin{table}
        \caption{Struktura databáze}
        \begin{tabular}[pos]{|c|c|c|c|}
            \hline
            \textbf{code} & \textbf{description} & \textbf{result} & \textbf{hint} \\
            \hline
            \hline
            dh & Vypočítejte soukromý klíč pomocí DH. Prvočíslo $p=\$1$\dots & NULL & Nápověda\dots \\
            \hline
            lcm & Najděte nejmenší společný násobek čísel $\$1$ a $\$2$. & NULL & Nápověda\dots \\
            \hline
            \smash{\vdots} & \vdots & \vdots & \vdots \\
            \hline
        \end{tabular}
    \end{table}
\end{frame}

% ------------------------------------------------------------------------

\begin{frame}[fragile]{Generátor hodnot}
    \begin{itemize}
        \item součást back-end serveru, logika implementována v PHP
        \item hodnoty jsou generovány náhodně, následně je kontrolvána jejich správnost
        \item z hodnot je vypočítán výsledek~--~obojí následně předáno další vrstvě
    \end{itemize}
    \begin{lstlisting}[language=php, title=ukázka kódu]
$random = rand(1,2); //slouzi k vyberu prvocislo / slozene cislo
                     //podle vyberu se operand $prime nastavi na True/False
if ($random == 1) {
//prvocislo
$X = rand(530, 10000);
$C = gmp\_nextprime($X); //vysledek
$prime= True;
} else {
//slozene cislo
}
    \end{lstlisting}
\end{frame}

\begin{frame}{Back-end server}
    \begin{itemize}
        \item vyvinut v PHP: \texttt{<url> = }\url{http://vut-fekt-mpckry-gr14.8u.cz/index.php}
        \item implementuje REST
    \end{itemize}
    \begin{table}
        \centering
        \caption{API funkce serveru} 
        \begin{tabular}{|c|c|c|}
            \hline
            \textbf{URL} & \textbf{popis} & \textbf{použití} \\
            \hline \hline
            \texttt{/alltasks} & zašle všechny úlohy z DB & \texttt{<url>/alltasks} \\
            \hline
            \texttt{/task?code=<code>} &zašle úlohu s daným kódem & \texttt{<url>/task?code=dh} \\
            \hline
            \texttt{/randomtask} & zašle náhodnou úlohu & \texttt{<url>/randomtask}\\
            \hline
        \end{tabular}
    \end{table}
    
\end{frame}

\begin{frame}{Front-end klient}
    \begin{itemize}
        \item vyvinut jako skript v Pythonu
        \item žádá back-end GET requestem, přijímá JSON objekty, které následně zobrazí
        \linebreak
        \item DEMO
    \end{itemize}
    
\end{frame}

% https://cs.overleaf.com/learn/latex/Lists

% ----------------------------------------------------------------------


% ----------------------------------------------------------------------
% https://en.wikibooks.org/wiki/LaTeX/Floats,_Figures_and_Captions


% ----------------------------------------------------------------------
% https://en.wikibooks.org/wiki/LaTeX/Tables


% ----------------------------------------------------------------------
% https://en.wikibooks.org/wiki/LaTeX/Mathematics


% ----------------------------------------------------------------------
% https://cs.overleaf.com/learn/latex/Code_listing
\begin{frame}[fragile]{Příklad kódu}
    % Need to use the "fragile" option when verbatim is used in the slide

\begin{lstlisting}[language=python,title={Příklad Python kódu}]

while True:
    valid_codes = print_all_tasks()
    code = str(input(f"{C_BLUE}[Skore: {SCORE}] {C_YELLOW}Zadejte kod ulohy, kterou si prejete resit:{C_RES}"))
    if code not in valid_codes:
        print(f"{C_RED}spatny kod{C_RES}")
    else:    
        clear_console()
        request = requests.get(f"{API}/task?code={code}")
\end{lstlisting}
    \vfill

\begin{lstlisting}[language=php,title={Příklad PHP kódu}]
$random = rand(1,2); //slouzi k vyberu prvocislo / slozene cislo
//podle vyberu se operand $prime nastavi na True/False
if ($random == 1) {
//prvocislo
$X = rand(530, 10000);
$C = gmp_nextprime($X); //vysledek

$prime= True;

} else {
//slozene cislo
\end{lstlisting}


\end{frame}

% ----------------------------------------------------------------------
% Remind the main results at the end of your presentation
\begin{frame}{Dosažené výsledky}
    \begin{itemize}
        \item Funkční generátor
    \end{itemize}
\end{frame}

% ----------------------------------------------------------------------

% ----------------------------------------------------------------------

\end{document}
